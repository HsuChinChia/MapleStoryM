<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0" />

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
        integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">

    <title>說喀就喀</title>
</head>

<body>


    <div id="app">
        <div class="container p-2">
            <div class="row">
                <div class="col-12 text-center">
                    <h2 style="color:#F56C6C">說喀就喀 完美四核六技</h2>
                    <p>
                        使用說明:假設我是龍魔島我想要的四核六技列為一下(自行修改)
                    </p>


                    <div class="input-group mb-1">
                        <span class="input-group-text" id="basic-addon3">技能1</span> <input v-model="skills[1]"
                            type="text" class="form-control" placeholder="技能1">
                    </div>
                    <div class="input-group mb-1">
                        <span class="input-group-text" id="basic-addon3">技能2</span> <input v-model="skills[2]"
                            type="text" class="form-control" placeholder="技能2">
                    </div>
                    <div class="input-group mb-1">
                        <span class="input-group-text" id="basic-addon3">技能3</span> <input v-model="skills[3]"
                            type="text" class="form-control" placeholder="技能3">
                    </div>
                    <div class="input-group mb-1">
                        <span class="input-group-text" id="basic-addon3">技能4</span> <input v-model="skills[4]"
                            type="text" class="form-control" placeholder="技能4">
                    </div>
                    <div class="input-group mb-1">
                        <span class="input-group-text" id="basic-addon3">技能5</span> <input v-model="skills[5]"
                            type="text" class="form-control" placeholder="技能5">
                    </div>
                    <div class="input-group">
                        <span class="input-group-text" id="basic-addon3">技能6</span> <input v-model="skills[6]"
                            type="text" class="form-control" placeholder="技能6">
                    </div>

                    <p>
                        <!-- 1.魔力還
                        2.龍之氣息
                        3.龍之主
                        4.火花
                        5.殘骸
                        6.聖歐尼斯龍 -->
                        <br>
                        目前擁有 (1.魔力還3.龍之主4.火花)(
                        2.龍之氣息3.龍之主5.殘骸)(5.殘骸6.聖歐尼斯龍4.火花)(1.魔力還6.聖歐尼斯龍4.火花)(3.龍之主2.龍之氣息5.殘骸)(6.聖歐尼斯龍2.龍之氣息1.魔力還)六組
                        <br>
                        則在input框內輸入 = 134,235,564,164,325,621
                    </p>
                    <p style=" color:#F56C6C">
                        注意!! 需要以,會區分且盡量不要有空格
                        <br>
                        注意!! 第一個為主詞，會過濾重複相同主詞的核心搭配
                    </p>

                    <div class="input-group mb-3">
                        <textarea type="textarea" v-model="initData" class="form-control"
                            placeholder="核心資料例如 123,232,621,467" aria-describedby="basic-addon1">
                    </textarea>
                    </div>
                    <button type="button" class="btn btn-primary" v-on:click="calc_core">確定</button>


                    <p>可用的完美核心組合:
                    <ol class="list-group list-group-numbered">
                        <li v-for="(item, index) in coreArray" class="list-group-item">{{item}}</li>
                    </ol>
                    <span class="text-info" v-if="coreArray.length === 0">
                        尚未找到完美核心的組合
                    </span>
                    </p>
                    <p>懶人翻譯後的完美核心組合:
                    <ol class="list-group list-group-numbered">
                        <li v-for="(item, index) in coreArray" class="list-group-item">
                            <span v-for="(core, coreIndex) in item" :key="coreIndex">
                                [
                                <span v-for=" (child,childIndex) in core" :key="childIndex">
                                    {{skills[child]}},
                                </span>
                                ]
                            </span>


                        </li>
                    </ol>
                    <span class="text-info" v-if="coreArray.length === 0">
                        尚未找到完美核心的組合
                    </span>
                    </p>
                    <p>整理排序:
                    <ol class="list-group list-group-numbered">
                        <li v-for="(item, index) in allResult" class="list-group-item">{{item}}</li>
                    </ol>
                    </p>



                </div>

            </div>
        </div>

        <!-- <button type="button" class="btn btn-primary" v-on:click="sendData">確定</button> -->

        <!-- <button type="button" class="btn btn-success" v-on:click="save">儲存資料</button> -->
        <!-- <button type="button" class="btn btn-danger" v-on:click="clear">清除資料</button> -->


    </div>



    <script src="https://cdn.jsdelivr.net/npm/vue"></script>


    <script>
        var app = new Vue({
            el: '#app',
            data: {
                initData: '',
                data: [],
                temp: [],
                coreArray: [],
                allResult: [],
                skills: {
                    1: '魔力環',
                    2: '龍之氣息',
                    3: '龍之主',
                    4: '火花',
                    5: '殘骸',
                    6: '聖歐尼斯龍',
                },
            },
            methods: {


                queue(arr, size) {
                    var allResult = [];

                    (function (arr, size, result) {
                        var arrLen = arr.length;
                        if (size > arrLen) {
                            return;
                        }
                        if (size == arrLen) {
                            allResult.push([].concat(result, arr))
                        } else {
                            for (var i = 0; i < arrLen; i++) {
                                var newResult = [].concat(result);
                                newResult.push(arr[i]);

                                if (size == 1) {
                                    allResult.push(newResult);
                                } else {
                                    var newArr = [].concat(arr);
                                    newArr.splice(0, i + 1);
                                    arguments.callee(newArr, size - 1, newResult);
                                }
                            }
                        }
                    })(arr, size, []);
                    this.allResult = allResult;
                    return allResult;

                    // if (size > arr.length) { return; }
                    // var allResult = [];

                    // (function (arr, size, result) {
                    //     if (result.length == size) {
                    //         console.log('result',result);
                    //         allResult.push(result);
                    //     } else {

                    //         for (var i = 0, len = arr.length; i < len; i++) {
                    //             console.log('arr', arr);
                    //             var newArr = [].concat(arr);
                    //             console.log('newArr', newArr);
                    //             curItem = newArr.splice(i, 1);
                    //             console.log('curItem', curItem);
                    //             console.log(' [].concat(result, curItem)',  [].concat(result, curItem));

                    //             arguments.callee(newArr, size, [].concat(result, curItem));
                    //         }
                    //     }
                    // })(arr, size, []);

                    // return allResult;
                },

                showResult(result) {
                    console.log('The number of result sets: ' + result.length);
                    for (var i = 0, len = result.length; i < len; i++) {


                        this.temp.push(result[i]);
                    }
                },
                // 找出不重複
                filter_repeat(Array) {
                    this.coreArray = [];
                    for (let item of Array) {
                        // 核心的字尾是主詞
                        let A = item[0][0];
                        let B = item[1][0];
                        let C = item[2][0];
                        let D = item[3][0];
                        let first = [A, B, C, D];
                        // 找出重複
                        let repeat = first.filter(function (element, index, arr) {
                            return arr.indexOf(element) !== index;
                        });
                        // 紀錄次數
                        let one = 0;
                        let two = 0;
                        let three = 0;
                        let four = 0;
                        let five = 0;
                        let six = 0;
                        const concat = `${item[0]}${item[1]}${item[2]}${item[3]}`
                        for (let i = 0; i < concat.length; i++) {
                            if (concat[i] === '1') {
                                one = one + 1;
                            }
                            if (concat[i] === '2') {
                                two = two + 1;
                            }

                            if (concat[i] === '3') {
                                three = three + 1;
                            }

                            if (concat[i] === '4') {
                                four = four + 1;
                            }

                            if (concat[i] === '5') {
                                five = five + 1;
                            }

                            if (concat[i] === '6') {
                                six = six + 1;
                            }
                        }

                        if (repeat.length === 0 && one === 2 && two === 2 && three === 2 && four === 2 && five === 2 && six === 2) {
                            this.coreArray.push(item);
                        }

                    }
                },
                calc_core() {
                    this.$set(this, "temp", [])
                    this.$set(this, "coreArray", [])
                    // this.initData = "532,243,614,265,612,264,621,451,235,365,362,213";
                    var arr = this.initData.split(',');
                    if (this.initData.length > 0) {
                        this.showResult(this.queue(arr, 4));
                        this.filter_repeat(this.temp);
                    }
                }

            },
            mounted() {
                this.calc_core();
            }

        })

    </script>

    <style>
        ul {
            list-style: none;
        }
    </style>



    <!-- Optional JavaScript; choose one of the two! -->

    <!-- Option 1: jQuery and Bootstrap Bundle (includes Popper) -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
        crossorigin="anonymous"></script>
    <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx"
        crossorigin="anonymous"></script> -->

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <!-- Option 2: jQuery, Popper.js, and Bootstrap JS
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" integrity="sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr/aWKhXdBNmNb5D92v7s" crossorigin="anonymous"></script>
    -->
</body>

</html>